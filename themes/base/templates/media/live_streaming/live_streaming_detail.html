{% extends "media/media_base.html" %}
{% load mezzanine_tags keyword_tags i18n organization_tags staticfiles %}

{% block meta_title %}{% trans "Live Streaming" %}{% endblock %}


{% block page_class %}
    live-streaming
{% endblock %}

{% block page_title %}
    {% editable person.title %}
        <h1 class="section-title section-title--uppercase section-title--main">{{ object.title }}</h1>
    {% endeditable %}
{% endblock %}

{% block page_sidebar %}
{% endblock %}

{% block page_content %}
    {% if object.type = "youtube" %}
        {% if object.youtube_id %}
            <div style="position:relative;height:0;padding-bottom:75.0%">
                <iframe src="https://www.youtube.com/embed/{{ object.youtube_id }}?ecver=2" width="1280" height="720" frameborder="0" style="position:absolute;width:100%;height:100%;left:0" allowfullscreen></iframe>
            </div>
        {% else %}
            <p>Please fill youtube id</p>
        {% endif %}
    {% elif object.type = "html5" %}
        {% if object.html5_url %}
            <video id="live-streaming" width="1280" height="720"  controls autoplay>
                <source src="{{ object.html5_url }}" type="video/webm">
            </video>
        {% else %}
            <p>Please fill html5 live streaming url</p>
        {% endif %}
    {% endif %}

    <div class="overlay">
        <div id="countdown-title"></div>
        <div id="countdown"></div>
    </div>
{% endblock %}

{% block footer_scripts %}
    {{ block.super }}
    <script src="{% static "src/js/modules/live-streaming-counter.js" %}"></script>

    <script type="text/javascript">
        var countdowndate = '{{ next_event.start|format_iso }}';
        CountDownTimer(countdowndate, 'countdown', 'live-streaming');
    </script>
{% endblock %}
